<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
</head>
<body>
<div id=maincontent>

</div>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    let test;
    let dada;
    fetch('https://api-adresse.data.gouv.fr/search/?q=a&postcode=30400', {method: 'GET',
        headers: {},
        cache: 'default'})
        .then(function(response){
                response.json()
                    .then(function(data){
                        document.getElementById("maincontent").innerHTML=data["features"][0]["properties"]["citycode"];
                        test = data["features"][0]["properties"]["citycode"];
                    })
            }
        )
    // fetch('https://transport.data.gouv.fr/api/datasets').then(
    // function(response){
    //     response.json().then(function(data){
    //         dada = data;
    //     })
    // }
    // )

    fetch('https://www.data.gouv.fr/fr/datasets/r/a87c7261-a9df-46b2-89fd-74449a04e4bf', { method: 'GET',
        headers: {},
        mode: 'cors',
        cache: 'default'}).then(
        function(response){
            response.json().then(function(data){
                dada = data;
                for (let i = 0; i < data["features"].length; i++) {
                    // console.log(data["features"][i]["properties"]["citycode"]);
                    // console.log("coucou");
                    if (data["features"][i]["properties"]["insee"] === test) {
                        document.getElementById("maincontent").innerHTML+=data["features"][i]["properties"]["libel"];
                    }
                }
                test = data["features"][0]["properties"]["citycode"];
            })
        }
    )
</script>